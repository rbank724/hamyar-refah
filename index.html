<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ù‡Ù…ÛŒØ§Ø± Ø±ÙØ§Ù‡</title>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ====== ÙÙˆÙ†Øª Ùˆ Ø§Ø³ØªØ§ÛŒÙ„ Ù¾Ø§ÛŒÙ‡ ====== */
    @font-face { font-family: 'Vazirmatn'; src: url('fonts/Vazirmatn-Light.woff2') format('woff2'); font-weight: 300; font-style: normal; }
    @font-face { font-family: 'Vazirmatn'; src: url('fonts/Vazirmatn-Regular.woff2') format('woff2'); font-weight: 400; font-style: normal; }
    @font-face { font-family: 'Vazirmatn'; src: url('fonts/Vazirmatn-Medium.woff2') format('woff2'); font-weight: 500; font-style: normal; }
    @font-face { font-family: 'Vazirmatn'; src: url('fonts/Vazirmatn-SemiBold.woff2') format('woff2'); font-weight: 600; font-style: normal; }
    @font-face { font-family: 'Vazirmatn'; src: url('fonts/Vazirmatn-Bold.woff2') format('woff2'); font-weight: 700; font-style: normal; }

    body { font-family: "Vazirmatn", sans-serif; background-color: #f9f9f9; margin:0; padding:16px; }
    h1, .search-input, .show-all-btn { color: #1f2937; }

    /* ====== Ø§Ø³ØªØ§ÛŒÙ„ Ù†ØªØ§ÛŒØ¬ ====== */
    .result-item {
      border-radius: 50%;
      aspect-ratio: 1/1;
      width: 100px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      background: linear-gradient(135deg, rgba(17,3,171,0.8), rgba(184,6,133,0.8));
      backdrop-filter: blur(5px);
    }

    .result-item:hover { transform: translateY(-3px) scale(1.02); box-shadow:0 10px 15px rgba(0,0,0,0.2); }

    /* ====== Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ====== */
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .fade-in-up { animation: fadeInUp 0.6s ease forwards; }

    /* ====== Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ùˆ ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ ====== */
    .pagination-btn { min-width: 40px; height: 40px; border-radius: 50%; font-weight: bold; transition: all 0.3s ease; cursor: pointer; font-size: 1rem; display:flex; align-items:center; justify-content:center; border:none; outline:none; }
    .pagination-active { background: linear-gradient(135deg, #4f46e5, #7c3aed); color:white; box-shadow: 0 4px 10px rgba(79,70,229,0.4); transform: translateY(-2px); }
    .pagination-inactive { background: #e5e7eb; color: #374151; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
    .pagination-btn:hover { transform: translateY(-2px) scale(1.05); box-shadow: 0 6px 12px rgba(0,0,0,0.2); }
    .pagination-btn:active { transform: scale(0.95); }

    /* ====== Ø¬Ø³ØªØ¬Ùˆ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ====== */
    .search-wrapper { position: relative; width: 100%; max-width: 28rem; margin-bottom: 0.5rem; }
    .search-clear { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 1.2rem; color: #9ca3af; }
    .search-input{ padding-left: 2rem; font-size: 16px; border:1px solid #ccc; border-radius:9999px; width:100%; height:44px; outline:none; }

    .show-all-btn { width:100%; max-width:28rem; margin-top:0.5rem; background:linear-gradient(to right, #090157, #6e027a); color:white; font-weight:bold; padding:0.75rem 1rem; border-radius:9999px; text-align:center; cursor:pointer; transition: all 0.3s ease; }
    .show-all-btn:hover { transform: translateY(-2px) scale(1.02); box-shadow:0 10px 15px rgba(0,0,0,0.2); }

    #categorySelect { color: #FFD700; background-color: #090157; text-align: center; text-align-last: center; direction: rtl; font-size: clamp(0.9rem,2.5vw,1.2rem); border-radius:12px; padding:0.5rem; margin-top:0.5rem; }
    #categorySelect:hover { cursor:pointer; transform: translateY(-1px); }

    #results { display: grid; gap: 1rem; width: max-content; margin:1rem auto; justify-content:center; grid-template-columns: repeat(3,1fr); }
    @media(min-width:768px){ #results { grid-template-columns: repeat(4,1fr); } }

    #detail, #detail * { text-align: justify !important; }
    #detail h2 { font-family: 'Vazirmatn', sans-serif; text-align: center !important; color: #800080 !important; font-weight: bold !important; margin: 0.5em 0; font-size: 20px !important; }
    #detail p { font-family: 'Vazirmatn', sans-serif; color: #000; }
    #detail p strong { color: #0420c2; text-shadow: 1px 1px 2px rgba(0,0,0,0.2); }
    #detail ul, #detail ol { padding-right: 1.5rem; margin:1rem 0; }
    #detail li { margin-bottom:0.5rem; line-height:1.8; }

    /* ====== Ù†ÙˆØ§Ø± Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú†Ø±Ø®Ø´ÛŒ ====== */
    #subtitle-bar { height: 50px; border-radius: 9999px; overflow: hidden; position: relative; margin: 15px auto; display:flex; align-items:center; justify-content:center; background: linear-gradient(to right, #1103ab, #b80685); }
    #subtitle-text { display:inline-block; white-space:nowrap; transform: translateX(100%); transition: transform 5s linear; color:white; padding:0 10px; font-size:1rem; text-align:center; }
  </style>
</head>
<body class="flex flex-col items-center m-0 p-4">

  <div class="title text-2xl font-bold">Ù‡Ù…ÛŒØ§Ø± Ø±ÙØ§Ù‡</div>

  <div class="subtitle text-center mx-auto max-w-3xl mt-2" style="text-shadow:2px 2px 4px rgba(0,0,0,0.2);">
    Ø¬Ø³ØªØ¬ÙˆÚ¯Ø± Ø·Ø±Ø­ Ù‡Ø§ÛŒ ØªØ³Ù‡ÛŒÙ„Ø§ØªÛŒ Ø¨Ø§Ù†Ú© Ø±ÙØ§Ù‡ Ú©Ø§Ø±Ú¯Ø±Ø§Ù†
  </div>

  <div class="search-wrapper">
    <span class="search-clear" onclick="clearSearch(event)">â†º</span>
    <input id="search-box" type="text" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯..." class="search-input"/>
  </div>

  <select id="categorySelect" class="show-all-btn">
    <option value="">Ø·Ø±Ø­ Ù‡Ø§ÛŒ ØªØ³Ù‡ÛŒÙ„Ø§ØªÛŒ</option>
  </select>

  <button id="show-all" class="show-all-btn">Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡</button>

  <div id="results"></div>
  <div id="pagination" class="flex gap-2 flex-wrap justify-center mt-4"></div>
  <div id="loading" class="hidden mt-4 text-gray-600 text-sm sm:text-base">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>

  <!-- âœ… Ù†ÙˆØ§Ø± Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú†Ø±Ø®Ø´ÛŒ -->
  <div id="subtitle-bar">
    <div id="subtitle-text">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
  </div>

  <!-- Ø¨Ù†Ø±Ù‡Ø§ÛŒ ØªØ¨Ù„ÛŒØºØ§ØªÛŒ -->
  <div id="ad-banners" class="w-full max-w-3xl mt-6 flex flex-col gap-4 animate-fadeIn">
    <a href="javascript:void(0)" onclick="showBannerDetail('tarh-html/Ú©Ø§Ø±Øª Ø±ÙØ§Ù‡ÛŒ.html', 'Ú©Ø§Ø±Øª Ø±ÙØ§Ù‡ÛŒ Ø¨Ø§Ù†Ú© Ø±ÙØ§Ù‡')" class="ad-banner bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition-transform duration-300 hover:scale-105">
      <div><img src="images/refahicard.jpg" loading="lazy" alt="Ø¨Ù†Ø± 1" class="w-full h-full object-cover"></div>
    </a>
  </div>

  <script>
    /* ====== Ù†ÙˆØ§Ø± Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú†Ø±Ø®Ø´ÛŒ ====== */
    const subtitles = [
      "âœ… Ø¢Ù…ÙˆØ²Ø´ Ø§Ù†ØªØ®Ø§Ø¨ Ø·Ø±Ø­ Ù…Ù†Ø§Ø³Ø¨ ØªØ³Ù‡ÛŒÙ„Ø§ØªÛŒ",
      "ğŸ’³ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ Ú©Ø§Ø±Øª Ø±ÙØ§Ù‡ÛŒ Ø¨Ø§Ù†Ú© Ø±ÙØ§Ù‡",
      "ğŸ“Œ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØºÛŒØ±Ø­Ø¶ÙˆØ±ÛŒ"
    ];

    const subtitleText = document.getElementById("subtitle-text");
    let idx = 0;

    function showNextSubtitle() {
      subtitleText.style.transition = "none";
      subtitleText.style.transform = "translateX(100%)";
      subtitleText.textContent = subtitles[idx];

      requestAnimationFrame(() => {
        subtitleText.style.transition = "transform 5s linear";
        subtitleText.style.transform = "translateX(-100%)";
      });

      idx = (idx + 1) % subtitles.length;
      setTimeout(showNextSubtitle, 5000);
    }

    document.addEventListener("DOMContentLoaded", showNextSubtitle);

    /* ====== Ø¬Ø§ÛŒÚ¯Ø°Ø§Ø±ÛŒ Ø¨Ù‚ÛŒÙ‡ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Fuse.js Ùˆ Ø¬Ø³ØªØ¬Ùˆ ====== */
    let data=[], fuse, filteredResults=[], showAll=false, currentPage=1;
    const perPage=12;

    fetch("data.json").then(res=>res.json()).then(json=>{
      data=json;
      fuse=new Fuse(data,{keys:["title","keywords"],threshold:0.1});
      filteredResults=[...data];
      renderPage(1);
      populateCategories();
    });

    function persianToEnglishNumbers(str){return str.replace(/[Û°-Û¹]/g,c=>"Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹".indexOf(c));}

    function doSearch(){
      const raw = document.getElementById("search-box").value.trim();
      const query = persianToEnglishNumbers(raw);
      if(!fuse || !data.length){ filteredResults=[]; renderPage(1); return; }
      filteredResults = query ? fuse.search(query).map(r=>r.item) : [...data];
      renderPage(1);
    }

    function renderPage(page){
      currentPage=page;
      const resultsDiv=document.getElementById("results");
      resultsDiv.innerHTML="";
      const start=(page-1)*perPage;
      const end=start+perPage;
      const pageItems=filteredResults.slice(start,end);
      pageItems.forEach(item=>{
        const div=document.createElement("div");
        div.className="result-item fade-in-up";
        div.textContent=item.title;
        resultsDiv.appendChild(div);
      });
      renderPagination();
    }

    function renderPagination(){
      const pages=Math.ceil(filteredResults.length/perPage);
      const pagination=document.getElementById("pagination");
      pagination.innerHTML="";
      for(let i=1;i<=pages;i++){
        const btn=document.createElement("button");
        btn.textContent=i;
        btn.className="pagination-btn "+(i===currentPage?"pagination-active":"pagination-inactive");
        btn.onclick=()=>renderPage(i);
        pagination.appendChild(btn);
      }
    }

    function populateCategories(){
      const catSelect=document.getElementById("categorySelect");
      const cats=new Set(data.map(d=>d.category));
      cats.forEach(c=>{
        const option=document.createElement("option");
        option.value=c; option.textContent=c;
        catSelect.appendChild(option);
      });
    }

    document.getElementById("search-box").addEventListener("input",doSearch);
    document.getElementById("show-all").addEventListener("click",()=>{ filteredResults=[...data]; renderPage(1); });
    document.getElementById("categorySelect").addEventListener("change",()=>{ 
      const val=document.getElementById("categorySelect").value;
      filteredResults=val?data.filter(d=>d.category===val):[...data]; 
      renderPage(1);
    });

    function clearSearch(e){ document.getElementById("search-box").value=""; doSearch(); }
  </script>
</body>
</html>

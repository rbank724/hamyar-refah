<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Ù‡Ù…ÛŒØ§Ø± Ø±ÙØ§Ù‡</title>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>

  @font-face {
   font-family: 'Vazirmatn';
   src: url('fonts/Vazirmatn-Light.woff2') format('woff2'),
   font-weight: 300;
   font-style: normal;
  }

  @font-face {
   font-family: 'Vazirmatn';
   src: url('fonts/Vazirmatn-Regular.woff2') format('woff2'),
   font-weight: 400;
   font-style: normal;
  }

  @font-face {
   font-family: 'Vazirmatn';
   src: url('fonts/Vazirmatn-Medium.woff2') format('woff2'),
   font-weight: 500;
   font-style: normal;
  }

  @font-face {
   font-family: 'Vazirmatn';
   src: url('fonts/Vazirmatn-SemiBold.woff2') format('woff2'),
   font-weight: 600;
   font-style: normal;
  }

  @font-face {
   font-family: 'Vazirmatn';
   src: url('fonts/Vazirmatn-Bold.woff2') format('woff2'),
   font-weight: 700;
   font-style: normal;
 }
    
    body { font-family: "Vazirmatn", sans-serif; background-color: #f9f9f9; }
    h1, .search-input, .show-all-btn { color: #1f2937; }

   .result-item {
      border-radius: 50%;
      aspect-ratio: 1/1;
      width: 100px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #fff;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      background: linear-gradient(135deg, rgba(17,3,171,0.8), rgba(184,6,133,0.8));
      backdrop-filter: blur(5px);
    }
    .result-item:hover { transform: translateY(-3px) scale(1.02); box-shadow:0 10px 15px rgba(0,0,0,0.2); }
    @keyframes fadeInUp { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }
    .fade-in-up { animation: fadeInUp 0.6s ease forwards; }

    /* --- Ø´Ù…Ø§Ø±Ù‡ ØµÙØ­Ø§Øª Ù…Ø¯Ø±Ù† Ùˆ Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ --- */
    .pagination-btn {
      min-width: 40px;
      height: 40px;
      border-radius: 50%;
      font-weight: bold;
      transition: all 0.3s ease;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      outline: none;
    }

    .pagination-active {
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      color: white;
      box-shadow: 0 4px 10px rgba(79, 70, 229, 0.4);
      transform: translateY(-2px);
    }

    .pagination-inactive {
      background: #e5e7eb;
      color: #374151;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }

    .pagination-btn:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .pagination-btn:active {
      transform: scale(0.95);
    }


    .search-wrapper { position: relative; width: 100%; max-width: 28rem; margin-bottom: 0.5rem; }
    .search-clear { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 1.2rem; color: #9ca3af; }
    .search-input{
      padding-left: 2rem;
      font-size: 16px; /* Ø­Ø¯Ø§Ù‚Ù„ 16px Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… */
    }

    .show-all-btn { width:100%; max-width:28rem; margin-top:0.5rem; background:linear-gradient(to right, #090157, #6e027a); color:white; font-weight:bold; padding:0.75rem 1rem; border-radius:9999px; text-align:center; cursor:pointer; transition: all 0.3s ease; }
    .show-all-btn:hover { transform: translateY(-2px) scale(1.02); box-shadow:0 10px 15px rgba(0,0,0,0.2); }

    #categorySelect {
      color: #FFD700;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      background-color: #090157;
      text-align: center;
      text-align-last: center;
      direction: rtl;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      font-size: clamp(0.9rem, 2.5vw, 1.2rem); 

      /* Ù†Ø¦ÙˆÙ…ÙˆØ±ÙÛŒØ³Ù… Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ */
      border-radius: 12px;
      box-shadow: 6px 6px 12px rgba(0,0,0,0.5),
                  -6px -6px 12px rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }

    #categorySelect:hover {
      box-shadow: inset 4px 4px 8px rgba(0,0,0,0.5),
                  inset -4px -4px 8px rgba(255,255,255,0.1);
      transform: translateY(-2px);
      cursor: pointer;
    }

    #results {
      display: grid;
      gap: 1rem;
      width: max-content;
      margin-left: auto;
      margin-right: auto;
      justify-content: center;
      justify-items: center;
      align-items: center;
      grid-template-columns: repeat(3, 1fr);
    }

    @media (min-width: 768px) {
      #results { grid-template-columns: repeat(4, 1fr); }
    }

    #backToTop { display:none; position:fixed; bottom:20px; left:20px; z-index:9999; background:#4f46e5; color:#fff; border:none; border-radius:50%; width:44px; height:44px; font-size:22px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.3); }

    #detail, #detail * { text-align: justify !important; }
    #detail-content * { color:inherit; }
    #detail-controls { display:flex; gap:8px; margin-bottom:6px; justify-start; }

    /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ Ø¨Ù†Ø±Ù‡Ø§ */
    @keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
    .animate-fadeIn { animation: fadeIn 0.6s ease forwards; }

    /* Ø¨Ù†Ø±Ù‡Ø§ Ù†Ø³Ø¨Øª 2:1 */
    .ad-banner > div { aspect-ratio: 3/1; }
     /* ğŸ”¹ Ù…ØªÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ù…Ø´Ú©ÛŒ Ø´ÙˆÙ†Ø¯ */

/* ØªÛŒØªØ±Ù‡Ø§ */
     #detail h2 {
        font-family: 'Vazirmatn', sans-serif;
        text-align: center !important;   /* ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† */
        color: #800080 !important;       /* Ø±Ù†Ú¯ Ø¨Ù†ÙØ´ */
        font-weight: bold !important;     /* Ø¶Ø®ÛŒÙ… */
        margin: 0.5em 0;        /* ÙØ§ØµÙ„Ù‡ Ø¨Ø§Ù„Ø§ Ùˆ Ù¾Ø§ÛŒÛŒÙ† */
        direction: rtl;       /* Ø±Ø§Ø³Øªâ€ŒÚ†ÛŒÙ† */
        text-shadow: 1px 1px 2px rgba(0,0,0,0.2) !important;
        font-size: 20px !important;      /* Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ†Øª Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
    }

     #detail p {
       font-family: 'Vazirmatn', sans-serif;
       color: #000; /* Ù…Ø´Ú©ÛŒ */
     }
    
     #detail p strong {
       font-family: 'Vazirmatn', sans-serif;
       color: #0420c2; 
       text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
     }
     /* âœ… Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø§Ø³ØªØ§ÛŒÙ„ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ø¬Ø²Ø¦ÛŒØ§Øª Ø·Ø±Ø­â€ŒÙ‡Ø§ */
     #detail ul {
       font-family: 'Vazirmatn', sans-serif;
       list-style-type: disc;      /* ÛŒÙˆÙ„Øª Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ Ú©Ù„Ø§Ø³ÛŒÚ© */
       padding-right: 1.5rem;      /* ÙØ§ØµÙ„Ù‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø² Ø±Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù‡ Ø´Ø¯Ù† ÛŒÙˆÙ„Øª */
       margin: 1rem 0;
     }

     #detail ol {
       font-family: 'Vazirmatn', sans-serif;
       list-style-type: decimal;   /* Ø¨Ø±Ø§ÛŒ Ù„ÛŒØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡â€ŒØ¯Ø§Ø± */
       padding-right: 1.5rem;
       margin: 1rem 0;
     }

     #detail li {
       font-family: 'Vazirmatn', sans-serif;
       margin-bottom: 0.5rem;      /* ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ */
       line-height: 1.8;
     }

  </style>
</head>
<body class="flex flex-col items-center m-0 p-4">

<div class="title">Ù‡Ù…ÛŒØ§Ø± Ø±ÙØ§Ù‡</div>

<style>
/* ÙÙˆÙ†Øª Ù…Ø¯Ø±Ù† Ùˆ ÙˆØ²Ù† Ù…Ù†Ø§Ø³Ø¨ */
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap');

.title {
    font-family: 'Vazirmatn'; /* ÙÙˆÙ†Øª Ù…Ø¯Ø±Ù† */
    font-size: 2rem; /* Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¨Ø²Ø±Ú¯ Ø¨Ø±Ø§ÛŒ ØªÛŒØªØ± */
    font-weight: 900;
    background: linear-gradient(135deg, #1103ab, #b80685); /* Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†Øª Ù…Ø¯Ø±Ù† */
    -webkit-background-clip: text; /* ÙÙ‚Ø· Ù…ØªÙ† Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ */
    -webkit-text-fill-color: transparent;
    text-align: center;
    margin: 1px 0;
    position: relative;

    
    /* Ø³Ø§ÛŒÙ‡ Ø¸Ø±ÛŒÙ */
    text-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    
    /* Ø§ÙÚ©Øª ÙˆØ±ÙˆØ¯ */
    opacity: 0;
    transform: translateY(-20px);
    animation: fadeInUp 1s forwards;
}

/* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† */
@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Ø§ÙÚ©Øª Ù‡Ø§ÙˆØ± */
.title:hover {
    background: linear-gradient(135deg, #b80685, #1103ab);
    text-shadow: 3px 3px 8px rgba(0,0,0,0.3);
    cursor: default;
}
</style>
  <div class="subtitle text-center mx-auto max-w-3xl overflow-wrap-break-word" 
     style="margin-top: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">
  Ø¬Ø³ØªØ¬ÙˆÚ¯Ø± Ø·Ø±Ø­ Ù‡Ø§ÛŒ ØªØ³Ù‡ÛŒÙ„Ø§ØªÛŒ Ø¨Ø§Ù†Ú© Ø±ÙØ§Ù‡ Ú©Ø§Ø±Ú¯Ø±Ø§Ù†
  </div>

  <div class="search-wrapper">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<span class="search-clear" onclick="clearSearch(event)">
  <span class="material-icons-outlined">autorenew</span>
</span>

<style>
.search-clear {
  display: inline-flex;            /* Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† Ø¹Ù…ÙˆØ¯ÛŒ */
  align-items: center;             /* ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† Ø¹Ù…ÙˆØ¯ÛŒ */
  justify-content: center;         /* ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† Ø§ÙÙ‚ÛŒ */
  width: 32px;                     /* Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¨Ø§Ú©Ø³ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ) */
  height: 32px;                    /* Ø§Ø±ØªÙØ§Ø¹ Ø¨Ø§Ú©Ø³ */
  cursor: pointer;
  color: #6a0dad;
  font-size: 30px;
}

.search-clear:hover .material-icons-outlined {
  transform: rotate(180deg);
  transition: transform 0.8s ease;
  color: #b80685;
}
</style>
    <input id="search-box" type="text" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯ (Ù†Ø§Ù… Ø·Ø±Ø­ØŒ Ú©Ù„ÛŒØ¯ÙˆØ§Ú˜Ù‡ ÛŒØ§ Ø´Ù…Ø§Ø±Ù‡ Ø§Ø·Ù„Ø§Ø¹ÛŒÙ‡ Ùˆ Ø¨Ø®Ø´Ù†Ø§Ù…Ù‡)" 
      class="search-input w-full px-4 py-3 text-sm text-lg border border-gray-300 rounded-full outline-none shadow-md"/>
  </div>

  <select id="categorySelect" class="show-all-btn">
    <option value="">Ø·Ø±Ø­ Ù‡Ø§ÛŒ ØªØ³Ù‡ÛŒÙ„Ø§ØªÛŒ</option>
  </select>

  <div id="results" class="mt-4 w-full max-w-3xl gap-4"></div>
  <div id="pagination" class="mt-4 flex gap-2 flex-wrap justify-center"></div>
  <div id="loading" class="hidden mt-4 text-gray-600 text-sm sm:text-base">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>

  <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
  <div id="detail-controls" class="flex gap-2 mb-4 hidden">
   <button id="home-btn" 
     title="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ" 
     onclick="clearSearch(event)"
     style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
          color:#fff;
          border:none;
          border-radius:50%;
          width:48px;
          height:48px;
          cursor:pointer;
          display:flex;
          align-items:center;
          justify-content:center;
          box-shadow:4px 4px 8px rgba(0,0,0,0.3),
                     -4px -4px 8px rgba(255,255,255,0.1);">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
</button>

<!-- âœ… Ø¯Ú©Ù…Ù‡ Ø¯Ø±Ø¨Ø§Ø±Ù‡ -->
<button id="about-btn" title="Ø¯Ø±Ø¨Ø§Ø±Ù‡"
     style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
            color:#fff;
            border:none;
            border-radius:50%;
            width:48px;
            height:48px;
            cursor:pointer;
            display:flex;
            align-items:center;
            justify-content:center;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3), -4px -4px 8px rgba(255,255,255,0.1);">
     <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
       <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15h-1v-6h2v6h-1zm0-8a1 1 0 110-2 1 1 0 010 2z"/>
     </svg>
</button>

<button id="calc-btn" title="Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨"
      style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
             color:#fff;
             border:none;
             border-radius:50%;
             width:48px;
             height:48px;
             cursor:pointer;
             display:flex;
             align-items:center;
             justify-content:center;
             box-shadow: 4px 4px 8px rgba(0,0,0,0.3), -4px -4px 8px rgba(255,255,255,0.1);">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
        <path d="M5 2h14a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm0 2v16h14V4H5zm2 2h10v3H7V6zm0 5h2v2H7v-2zm3 0h2v2h-2v-2zm3 0h2v2h-2v-2zM7 14h2v2H7v-2zm3 0h2v2h-2v-2zm3 0h2v2h-2v-2zM7 17h2v2H7v-2zm3 0h2v2h-2v-2zm3 0h2v2h-2v-2z"/>
      </svg>
</button>
<script>
 document.getElementById('calc-btn').addEventListener('click', function() {
  window.open('https://www.refah-bank.ir/vam-to', '_blank');
 });
</script>

<button id="share-btn" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ" 
     style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
            color:#fff;
            border:none;
            border-radius:50%;
            width:48px;
            height:48px;
            cursor:pointer;
            display:flex;
            align-items:center;
            justify-content:center;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3), -4px -4px 8px rgba(255,255,255,0.1);">
     <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M4 12v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7"></path>
      <polyline points="16 6 12 2 8 6"></polyline>
      <line x1="12" y1="2" x2="12" y2="15"></line>
     </svg>
</button>

<button id="font-plus" title="Ø¨Ø²Ø±Ú¯ØªØ±" style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
             color:#fff;
             border:none;
             border-radius:50%;
             width:48px;
             height:48px;
             cursor:pointer;
             font-weight:bold;
             box-shadow: 4px 4px 8px rgba(0,0,0,0.3), -4px -4px 8px rgba(255,255,255,0.1);">A+</button>
<button id="font-minus" title="Ú©ÙˆÚ†Ú©ØªØ±" style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
             color:#fff;
             border:none;
             border-radius:50%;
             width:48px;
             height:48px;
             cursor:pointer;
             font-weight:bold;
             box-shadow: 4px 4px 8px rgba(0,0,0,0.3), -4px -4px 8px rgba(255,255,255,0.1);">A-</button>
<button id="back-btn" title="Ø¨Ø§Ø²Ú¯Ø´Øª" 
     style="background: linear-gradient(145deg, #5c4bd6, #3c33a8);
            color:#fff;
            border:none;
            border-radius:50%;
            width:48px;
            height:48px;
            cursor:pointer;
            display:flex;
            align-items:center;
            justify-content:center;
            box-shadow: 4px 4px 8px rgba(0,0,0,0.3), -4px -4px 8px rgba(255,255,255,0.1);">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
       <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
</button>

<!-- âœ… Ù…ÙˆØ¯Ø§Ù„ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¨Ø§ Ø§ÙÚ©Øª -->
<div id="aboutModal" style="display:none; position:fixed; z-index:2000; left:0; top:0; width:100%; height:100%; background-color:rgba(0,0,0,0.4); backdrop-filter:blur(3px); opacity:0; transition:opacity 0.3s ease;">
  <div style="background:#fff; margin:10% auto; padding:20px 25px; border-radius:12px; max-width:500px; direction:rtl; line-height:1.8; text-align:justify; box-shadow:0 5px 15px rgba(0,0,0,0.3);">
    <span onclick="closeAbout()" style="color:#999; float:left; font-size:28px; font-weight:bold; cursor:pointer;">&times;</span>
    <p style="text-align:center; margin-bottom:15px;">
      <strong style="color:#570278;">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡Ù…ÛŒØ§Ø± Ø±ÙØ§Ù‡</strong>
    </p>
    <p>ÙˆØ¨â€ŒØ³Ø§ÛŒØª Ù‡Ù…ÛŒØ§Ø± Ø±ÙØ§Ù‡ Ø¨Ø§ Ù‡Ø¯Ù Ø§Ø·Ù„Ø§Ø¹ Ø±Ø³Ø§Ù†ÛŒ Ø®Ø¯Ù…Ø§Øª Ùˆ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ù…ØªÙ†ÙˆØ¹ ØªØ³Ù‡ÛŒÙ„Ø§ØªÛŒ Ø¨Ø§Ù†Ú© Ø±ÙØ§Ù‡ Ú©Ø§Ø±Ú¯Ø±Ø§Ù†ØŒ Ø·Ø±Ø§Ø­ÛŒ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
    <p>Ø§ÛŒÙ† Ø³Ø§Ù…Ø§Ù†Ù‡ Ø¨Ø³ØªØ±ÛŒ Ø³Ø§Ø¯Ù‡ØŒ Ø´ÙØ§Ù Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÙ†Ù…Ø§ÛŒØ¯ ØªØ§ Ù…Ø´ØªØ±ÛŒØ§Ù† Ù…Ø­ØªØ±Ù… Ø¨ØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ø§ Ø¢Ú¯Ø§Ù‡ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² ØªØ³Ù‡ÛŒÙ„Ø§Øª Ùˆ Ø·Ø±Ø­â€ŒÙ‡Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒØŒ Ø¨Ù‡ØªØ±ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ù…ØªÙ†Ø§Ø³Ø¨ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø®ÙˆØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù†Ø¯.</p>
    <p>Ø¨Ø§Ù†Ú© Ø±ÙØ§Ù‡ Ú©Ø§Ø±Ú¯Ø±Ø§Ù† Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±ÛŒÙ† Ø¨Ø§Ù†Ú© Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ú©Ø´ÙˆØ±ØŒ Ø®ÙˆØ¯ Ø±Ø§ Ù…ØªØ¹Ù‡Ø¯ Ø¨Ù‡ Ø­Ù…Ø§ÛŒØª Ø§Ø² Ø§Ù‚ØªØµØ§Ø¯ Ø®Ø§Ù†ÙˆØ§Ø±Ù‡Ø§ Ùˆ ØªÙˆØ§Ù†Ù…Ù†Ø¯Ø³Ø§Ø²ÛŒ Ø¨Ù†Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ø³Ø§Ù†â€ŒØªØ± Ø¨Ù‡ Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø§Ù„ÛŒ Ùˆ Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯.</p>
    <p style="text-align: center;">
     <a href="tel:0218525" style="color:#570278; text-decoration:none; display:inline-flex; align-items:center; gap:6px; font-weight:bold; margin-left:20px;">
        Û°Û²Û±Û¸ÛµÛ²Ûµ ğŸ“
     </a>
     <a href="https://www.refah-bank.ir" target="_blank" style="color:#570278; text-decoration:none; font-weight:bold; display:inline-flex; align-items:center; gap:6px;">
       www.refah-bank.ir ğŸŒ
     </a>
    </p>
    <hr>
    <p style="text-align:center; color:#1b0db8; font-size:0.7rem;"><strong>Ø·Ø±Ø§Ø­ÛŒ Ùˆ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:</strong><br>Ú¯Ø±ÙˆÙ‡ Ú©Ø§Ø±Ø´Ù†Ø§Ø³ÛŒ ÙÙ†Ø§ÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª<br>Ù…Ø¯ÛŒØ±ÛŒØª Ø´Ø¹Ø¨ Ø§Ø³ØªØ§Ù† Ø¨ÙˆØ´Ù‡Ø±</p>
  </div>
</div>

<script>
  const aboutModal = document.getElementById('aboutModal');

  document.getElementById('about-btn').addEventListener('click', function() {
    aboutModal.style.display = 'block';
    setTimeout(() => { aboutModal.style.opacity = '1'; }, 10);
  });

  function closeAbout() {
    aboutModal.style.opacity = '0';
    setTimeout(() => { aboutModal.style.display = 'none'; }, 300);
  }

  window.onclick = function(event) {
    if (event.target === aboutModal) {
      closeAbout();
    }
  };
</script>
  </div>


  <div id="detail" class="mt-8 w-full max-w-3xl p-5 rounded-xl bg-white shadow-md hidden leading-8 text-sm sm:text-base"></div>

  <!-- Ø¨Ù†Ø±Ù‡Ø§ÛŒ ØªØ¨Ù„ÛŒØºØ§ØªÛŒ 2:1 -->
  <div id="ad-banners" class="hidden w-full max-w-3xl mt-6 flex flex-col gap-4 animate-fadeIn">
    <a href="https://www.refah-bank.ir/cardrefahi" target="_blank" class="ad-banner bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition-transform duration-300 hover:scale-105">
      <div><img src="images/refahicard.jpg" loading="lazy" alt="Ø¨Ù†Ø± 1" class="w-full h-full object-cover"></div>
    </a>
    <a href="https://www.refah-bank.ir/fararefah" target="_blank" class="ad-banner bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition-transform duration-300 hover:scale-105">
      <div><img src="images/fararefah.jpg" loading="lazy" alt="Ø¨Ù†Ø± 2" class="w-full h-full object-cover"></div>
    </a>
    <a href="https://www.vibe.ir" target="_blank" class="ad-banner bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition-transform duration-300 hover:scale-105">
      <div><img src="images/vibe.jpg" loading="lazy" alt="Ø¨Ù†Ø± 3" class="w-full h-full object-cover"></div>
    </a>
  </div>
  
<script>
    let data = [], , filteredResults = [], showAll = false, currentPage = 1;
    const perPage = 12, fileCache = new Map();
    let categories = new Set();

    // â³ ØªØ¹ÛŒÛŒÙ† Ø²Ù…Ø§Ù† Ø§Ø¹ØªØ¨Ø§Ø± Ú©Ø´ (Ø¨Ù‡ Ù…ÛŒÙ„ÛŒâ€ŒØ«Ø§Ù†ÛŒÙ‡) â€” Ù…Ø«Ù„Ø§Ù‹ 24 Ø³Ø§Ø¹Øª
    const CACHE_DURATION = 24 * 60 * 60 * 1000;

    // --- ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ ---
    function persianToEnglishNumbers(str) {
      return String(str).replace(/[Û°-Û¹]/g, d => '0123456789'[d.charCodeAt(0) - 1776]);
    }

    function isNumericPattern(s){
      // Ø´Ø§Ù…Ù„ Ø§Ø±Ù‚Ø§Ù… ÙØ§Ø±Ø³ÛŒ/Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒØŒ /ØŒ -ØŒ . Ùˆ ÙØ§ØµÙ„Ù‡
      return /^[\dÛ°-Û¹\/\-\.\s]+$/.test(String(s||''));
    }
    function normalizeNumberQuery(s){
      return persianToEnglishNumbers(String(s||''))
               .replace(/\s+/g,'')        // Ø­Ø°Ù ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§
               .replace(/[-\.]+/g,'/')    // - Ùˆ . => /
               .trim();
    }

    function normalizeForSearch(s){
      // Ù†Ú¯Ù‡ Ø¯Ø§Ø´ØªÙ† Ø­Ø±ÙˆÙ ÙØ§Ø±Ø³ÛŒ/Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ùˆ Ø§Ø¹Ø¯Ø§Ø¯ Ùˆ Ø§Ø³Ù„Ø´ Ùˆ ÙØ§ØµÙ„Ù‡
      return persianToEnglishNumbers(String(s||''))
               .replace(/[^\w\u0600-\u06FF\/\s]/g,' ')
               .replace(/\s+/g,' ')
               .trim()
               .toLowerCase();
    }

    // debounce Ø³Ø§Ø¯Ù‡
    function debounce(fn, wait=180){
      let t;
      return function(...args){ clearTimeout(t); t = setTimeout(()=>fn.apply(this, args), wait); };
    }

    // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø§Ù†Ø¯Ø§Ø²Ù‡ fileCache
    function cacheFile(url, html){
      const MAX = 50;
      if (fileCache.size >= MAX) {
        const first = fileCache.keys().next().value;
        fileCache.delete(first);
      }
      fileCache.set(url, html);
    }

    // ğŸŸ¢ Ù…Ø±Ø­Ù„Ù‡ Û±: Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø´ Ø¨Ø§ try/catch Ø§Ù…Ù†
    try {
      const cachedData = localStorage.getItem("data");
      const cachedTime = localStorage.getItem("data_time");
      const now = Date.now();

      if (cachedData && cachedTime && (now - cachedTime) < CACHE_DURATION) {
        const json = JSON.parse(cachedData);
        if (Array.isArray(json) && json.length) {
          data = json;
        }
      }
    } catch(e) {
      console.warn('cached data corrupted â€” clearing cache', e);
      localStorage.removeItem('data');
      localStorage.removeItem('data_time');
      data = [];
    }

    // ğŸŸ¡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÛŒØ§ ØªÚ©Ù…ÛŒÙ„ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
    (function initData(){
      const catSelect = document.getElementById("categorySelect");
      if (data.length) {
        // Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ (ÙÙ‚Ø· Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ÛŒÚ© ÙÛŒÙ„Ø¯ Ú©Ù…Ú©ÛŒ)
        data.forEach(it => {
          it._searchText = normalizeForSearch((it.title || '') + ' ' + (Array.isArray(it.keywords)? it.keywords.join(' '): ''));
        });
        // Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Fuse Ø¨Ø§ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ØªØ±
        // âœ… Ù…Ø±Ø­Ù„Ù‡ Û±: Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Fuse.js (Ø¯Ø± Ù‡Ù…ÙˆÙ† Ø¬Ø§ÛŒÛŒ Ú©Ù‡ fuse Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒØ´Ù‡)
        fuse = new Fuse(data, {
         keys: ['title', 'keywords'],
         includeScore: true,          // Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚Øª ØªØ·Ø¨ÛŒÙ‚
         threshold: 0.1,              // Ø¹Ø¯Ø¯ Ú©Ù…ØªØ± = Ø¯Ù‚Øª Ø¨ÛŒØ´ØªØ±
         distance: 50,                // Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ù‡ ÙØ§ØµÙ„Ù‡â€ŒÛŒ Ø­Ø±ÙˆÙ
         minMatchCharLength: 3,       // Ø­Ø¯Ø§Ù‚Ù„ Ø·ÙˆÙ„ ØªØ·Ø¨ÛŒÙ‚
         ignoreLocation: true,        // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú©Ù„ Ø¹Ø¨Ø§Ø±ØªØŒ Ù†Ù‡ ÙÙ‚Ø· Ø§ÙˆÙ„
         useExtendedSearch: true      // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§Ù„Øª Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±
       });

        data.forEach(item => categories.add(item.category));
        categories.forEach(cat => {
          const opt = document.createElement("option");
          opt.value = cat;
          opt.textContent = cat;
          catSelect.appendChild(opt);
        });
      } else {
        // fetch Ø§Ù…Ù† Ø¨Ø§ catch Ùˆ Ù¾ÛŒØ§Ù… Ø®Ø·Ø§
        fetch("data.json").then(res=>{
          if(!res.ok) throw new Error('HTTP '+res.status);
          return res.json();
        }).then(json => {
          data = Array.isArray(json)? json : [];
          data.forEach(it => {
            it._searchText = normalizeForSearch((it.title || '') + ' ' + (Array.isArray(it.keywords)? it.keywords.join(' '): ''));
          });
          fuse = new Fuse(data, {
            keys: ['title', 'keywords'],
            includeScore: true,          // Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚Øª ØªØ·Ø¨ÛŒÙ‚
            threshold: 0.1,              // Ø¹Ø¯Ø¯ Ú©Ù…ØªØ± = Ø¯Ù‚Øª Ø¨ÛŒØ´ØªØ±
            distance: 50,                // Ø­Ø³Ø§Ø³ÛŒØª Ø¨Ù‡ ÙØ§ØµÙ„Ù‡â€ŒÛŒ Ø­Ø±ÙˆÙ
            minMatchCharLength: 3,       // Ø­Ø¯Ø§Ù‚Ù„ Ø·ÙˆÙ„ ØªØ·Ø¨ÛŒÙ‚
            ignoreLocation: true,        // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ú©Ù„ Ø¹Ø¨Ø§Ø±ØªØŒ Ù†Ù‡ ÙÙ‚Ø· Ø§ÙˆÙ„
            useExtendedSearch: true      // ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§Ù„Øª Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±
          });
          data.forEach(item => categories.add(item.category));
          categories.forEach(cat => {
            const opt = document.createElement("option");
            opt.value = cat;
            opt.textContent = cat;
            catSelect.appendChild(opt);
          });
          try {
            localStorage.setItem("data", JSON.stringify(json));
            localStorage.setItem("data_time", Date.now());
          } catch(e){
            console.warn('Could not save to localStorage', e);
          }
        }).catch(err => {
          console.error('Failed to load data.json', err);
          alert('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§. Ù„Ø·ÙØ§ ØµÙØ­Ù‡ Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø¨Ø¹Ø¯Ø§ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
        });
      }
    })();

    const searchBox = document.getElementById("search-box");
    const resultsDiv = document.getElementById("results");
    const detailDiv = document.getElementById("detail");
    const loading = document.getElementById("loading");
    const paginationDiv = document.getElementById("pagination");
    const controls = document.getElementById("detail-controls");

    window.addEventListener("DOMContentLoaded", () => {
      controls.style.display = "none";
      const adBannersEl = document.getElementById('ad-banners');
      if (adBannersEl) adBannersEl.classList.remove('hidden');
    });

    // --- renderPage (Ø³Ø§Ø®ØªØ§Ø± Ø­ÙØ¸ Ø´Ø¯Ù‡ØŒ ÙÙ‚Ø· Ø§ÛŒÙ…Ù†â€ŒØªØ± Ùˆ Ø¯Ø³ØªØ±Ø³â€ŒÙ¾Ø°ÛŒØ±ØªØ±) ---
    function renderPage(page){
      resultsDiv.innerHTML = ""; paginationDiv.innerHTML = ""; hideDetail();
      if(filteredResults.length===0){ resultsDiv.style.display="none"; return; } else { resultsDiv.style.display="grid"; }
      const start = (page-1)*perPage;
      const pageItems = filteredResults.slice(start,start+perPage);
      pageItems.forEach(r=>{
        const item = r.item||r;
        const div = document.createElement("div");
        div.className="result-item text-white shadow-md text-sm sm:text-base";
        div.innerHTML=`<strong>${item.title}</strong>`;
        // Ø¯Ø³ØªØ±Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ
        div.tabIndex = 0;
        div.setAttribute('role','button');
        div.addEventListener('keydown', e => { if (e.key === 'Enter') div.click(); });

        div.onclick = async () => {
          resultsDiv.style.display="none"; loading.style.display="block";
          try {
            if(fileCache.has(item.file)){ showDetail(item, fileCache.get(item.file)); }
            else {
              const res = await fetch(item.file);
              if (!res.ok) throw new Error('HTTP ' + res.status);
              const html = await res.text();
              cacheFile(item.file, html);
              showDetail(item, html);
            }
          } catch (err) {
            console.error(err);
            loading.style.display = "none";
            resultsDiv.style.display = "grid";
            alert('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª. Ù„Ø·ÙØ§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.');
          }
        };
        resultsDiv.appendChild(div);
      });

      const totalPages = Math.ceil(filteredResults.length/perPage);
      if(totalPages>1){
        for(let i=1;i<=totalPages;i++){
          const btn = document.createElement("button");
          btn.textContent=i;
          btn.className="pagination-btn "+(i===page?"pagination-active":"pagination-inactive");
          btn.onclick=()=>{currentPage=i; renderPage(i);}
          paginationDiv.appendChild(btn);
        }
      }
    }

    function showDetail(item, html){
      loading.style.display = "none";
      // Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ Ú©ÙˆÚ†Ú© Ø¯Ø± ØµÙˆØ±Øª Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ Ø§Ø² Ø¯Ø§Ù…Ù†Ù‡Ù” Ø®Ø§Ø±Ø¬ÛŒ
      try {
        if (!String(item.file).startsWith(location.origin) && !String(item.file).startsWith('/')) {
          console.warn('Loading remote file â€” ensure it is trusted:', item.file);
        }
      } catch(e){ /* ignore */ }
      detailDiv.innerHTML = html;
      detailDiv.style.display = "block";
      paginationDiv.style.display = "none";
      detailDiv.scrollIntoView({behavior:"smooth"});
      controls.style.display = "flex";
      controls.style.marginTop = "20px"; // ÙØ§ØµÙ„Ù‡ Ø§Ø² Ø¨Ø§Ù„Ø§ÛŒ Ú©Ø§Ø¯Ø±
      const share = document.getElementById("share-btn");
      share.onclick = () => {
        const contentText = detailDiv.innerText;
        const textToShare = item.title + "\n\n" + contentText;
        if(navigator.share){ navigator.share({ title:item.title, text:textToShare }); }
        else { navigator.clipboard.writeText(textToShare).then(()=>{ alert("Ù…ØªÙ† Ø·Ø±Ø­ Ùˆ Ø¹Ù†ÙˆØ§Ù† Ø¢Ù† Ú©Ù¾ÛŒ Ø´Ø¯."); }); }
      };
      const plus = document.getElementById("font-plus");
      const minus = document.getElementById("font-minus");
      let fontSize = 16;
      plus.onclick = () => { fontSize +=2; detailDiv.style.fontSize = fontSize+"px"; detailDiv.style.lineHeight="1.8"; };
      minus.onclick = () => { if(fontSize>10){ fontSize-=2; detailDiv.style.fontSize=fontSize+"px"; detailDiv.style.lineHeight="1.8"; } };
    }

    function hideDetail(){ detailDiv.style.display="none"; controls.style.display="none"; }

     // âœ… Ù…Ø±Ø­Ù„Ù‡ Û²: ØªØ§Ø¨Ø¹ Ø¬Ø³ØªØ¬Ùˆ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø³Ø§Ø®ØªØ§Ø± Ú©Ù„ÛŒ)
    function doSearch(){
      const raw = searchBox.value.trim();
      const query = persianToEnglishNumbers(raw); // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø¹Ø¯Ø§Ø¯ ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ

      if(!fuse || !data.length) { 
        filteredResults = []; 
        renderPage(1); 
        return; 
      }

      // âœ… Ø§Ú¯Ø± ÙˆØ±ÙˆØ¯ÛŒ Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯
      if(query.length === 0) {
        filteredResults = [];
        renderPage(1);
        return;
      }

      // âœ… Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø±Ø´ØªÙ‡ Ø´Ø§Ù…Ù„ Ø¹Ø¯Ø¯ ÛŒØ§ "/" Ø¨Ø§Ø´Ø¯ (Ù…Ø«Ù„ 1/1365 ÛŒØ§ Û±Û³/Û±Û´Û°Û²)
      if (/^[\d\/]+$/.test(query)) {
        const q = query.replace(/\s+/g, '').trim(); // Ø­Ø°Ù ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
        filteredResults = data.filter(d => {
          const combined = [
            d.title,
            ...(d.keywords || [])
          ].map(x => persianToEnglishNumbers(x.toString().replace(/\s+/g, '')));
          // ØªØ·Ø¨ÛŒÙ‚ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡â€ŒÙ‡Ø§
          return combined.some(x => x === q);
        });
      } 
      else {
        // âœ… Ø­Ø§Ù„Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ Fuse.js Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…ØªÙ†ÛŒ
        const results = fuse.search(query);

        // ÙÙ‚Ø· Ù…ÙˆØ§Ø±Ø¯ÛŒ Ú©Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ø¯Ù‚ÛŒÙ‚ Ø¯Ø§Ø±Ù†Ø¯ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆÙ†Ø¯
        filteredResults = results
          .filter(r => r.score <= 0.3)   // Ù†ØªØ§ÛŒØ¬ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø§Ø² Ø­Ø¯ Ù…Ø´Ø®Øµ
          .map(r => r.item);
      }

      currentPage = 1;
      renderPage(currentPage);
    }


    function clearSearch(event){
      searchBox.value="";
      const catSelect = document.getElementById("categorySelect");
      catSelect.value = "";
      hideDetail();
      filteredResults=[];
      renderPage(1);
      const adBanners = document.getElementById('ad-banners');
      if(adBanners) {
        adBanners.classList.remove('hidden');
        adBanners.classList.add('animate-fadeIn');
      }
      if(event) event.stopPropagation();
    }

    document.getElementById("categorySelect").addEventListener("change", e => {
      const cat = e.target.value;
      hideDetail();
      detailDiv.innerHTML = "";
      resultsDiv.innerHTML = "";
      paginationDiv.innerHTML = "";
      paginationDiv.style.display = "flex";
      filteredResults = (cat === "") ? [] : data.filter(d => d.category === cat).map(d => ({item: d}));
      currentPage = 1;
      resultsDiv.style.display = (filteredResults.length > 0) ? "grid" : "none";
      renderPage(currentPage);
    });

    // debounce Ù‚Ø¨Ù„ Ø§Ø² Ø«Ø¨Øª event listener (Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…Ø³ØªÙ‚ÛŒÙ…)
    searchBox.addEventListener("input", debounce(doSearch, 180));

    const backBtn = document.getElementById("back-btn");
    backBtn.onclick = () => {
      hideDetail();
      resultsDiv.style.display = "grid";
      paginationDiv.style.display = "flex";
      renderPage(currentPage);
      window.scrollTo({ top: 0, behavior: "smooth" });
    };

    const broom = document.querySelector('.search-clear');
    if (broom) {
      broom.addEventListener('click', () => {
        const adBanners = document.getElementById('ad-banners');
        if (adBanners) adBanners.classList.remove('hidden');
      });
    }

    document.addEventListener('click', (e) => {
      const adBanners = document.getElementById('ad-banners');
      if (!adBanners) return;
      if (!adBanners.contains(e.target) && !e.target.classList.contains('search-clear')) {
        adBanners.classList.add('hidden');
      }
      if (adBanners.contains(e.target)) {
        adBanners.classList.add('hidden');
      }
    });

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(reg => {
          reg.onupdatefound = () => {
            const newWorker = reg.installing;
            newWorker.onstatechange = () => {
              if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                const bar = document.createElement('div');
                bar.textContent = 'Ù†Ø³Ø®Ù‡â€ŒÛŒ Ø¬Ø¯ÛŒØ¯ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³ØªØ› Ø¨Ø±Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø²Ù†ÛŒØ¯';
                Object.assign(bar.style, {
                  position: 'fixed', bottom: '0', left: '0', right: '0',
                  background: '#007BFF', color: '#fff', textAlign: 'center',
                  padding: '10px', fontFamily: 'inherit', cursor: 'pointer', zIndex: 9999
                });
                bar.onclick = () => location.reload();
                document.body.appendChild(bar);
              }
            };
          };
        })
        .catch(err => console.warn('sw register failed', err));
    }
</script>
</body>
</html>
